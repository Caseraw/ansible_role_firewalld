---
language: python
services: docker
env:
  global:
    - namespace="caseraw"
    - role_name="ansible_role_firewalld"
  matrix:
    - image="ansible-molecule-centos" tag="7" cmd="/usr/sbin/init"
    - image="ansible-molecule-centos" tag="8" cmd="/usr/sbin/init"
    - image="ansible-molecule-centos" tag="latest" cmd="/usr/sbin/init"
    - image="ansible-molecule-fedora" tag="28" cmd="/usr/sbin/init"
    - image="ansible-molecule-fedora" tag="29" cmd="/usr/sbin/init"
    - image="ansible-molecule-fedora" tag="30" cmd="/usr/sbin/init"
    - image="ansible-molecule-fedora" tag="31" cmd="/usr/sbin/init"
    - image="ansible-molecule-fedora" tag="latest" cmd="/usr/sbin/init"
cache: pip
install:
  - pip install --upgrade pip setuptools
  - pip install molecule docker
before_script:
  - mkdir /lib/modules/$(uname -r)
  - 'touch /lib/modules/$(uname -r)/modules.{builtin,order}'
  - 'for i in /sys/module/*; do echo kernel/${i##**/}.ko; done >> /lib/modules/$(uname -r)/modules.builtin'
  - 'depmod -a'
script:
  - python --version
  - ansible --version
  - molecule --version
  - molecule test
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/

...
